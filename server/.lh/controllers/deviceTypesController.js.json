{
    "sourceFile": "controllers/deviceTypesController.js",
    "activeCommit": 0,
    "commits": [
        {
            "activePatchIndex": 2,
            "patches": [
                {
                    "date": 1754902025159,
                    "content": "Index: \n===================================================================\n--- \n+++ \n"
                },
                {
                    "date": 1755498236524,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,7 +1,8 @@\n // controllers/deviceTypesController.js\r\n const db = require('../config/db');\r\n \r\n+\r\n // ดึงข้อมูลทั้งหมด\r\n exports.getAllDeviceTypes = async (req, res) => {\r\n   try {\r\n     const [rows] = await db.query('SELECT * FROM device_types');\r\n"
                },
                {
                    "date": 1755498241658,
                    "content": "Index: \n===================================================================\n--- \n+++ \n@@ -1,8 +1,7 @@\n // controllers/deviceTypesController.js\r\n const db = require('../config/db');\r\n \r\n-\r\n // ดึงข้อมูลทั้งหมด\r\n exports.getAllDeviceTypes = async (req, res) => {\r\n   try {\r\n     const [rows] = await db.query('SELECT * FROM device_types');\r\n"
                }
            ],
            "date": 1754902025159,
            "name": "Commit-0",
            "content": "// controllers/deviceTypesController.js\r\nconst db = require('../config/db');\r\n\r\n// ดึงข้อมูลทั้งหมด\r\nexports.getAllDeviceTypes = async (req, res) => {\r\n  try {\r\n    const [rows] = await db.query('SELECT * FROM device_types');\r\n    res.json(rows);\r\n  } catch (err) {\r\n    res.status(500).json({ error: err.message });\r\n  }\r\n};\r\n\r\n// ดึงข้อมูลตาม id\r\nexports.getDeviceTypeById = async (req, res) => {\r\n  try {\r\n    const { id } = req.params;\r\n    const [rows] = await db.query('SELECT * FROM device_types WHERE id = ?', [id]);\r\n    if (rows.length === 0) return res.status(404).json({ message: 'Not found' });\r\n    res.json(rows[0]);\r\n  } catch (err) {\r\n    res.status(500).json({ error: err.message });\r\n  }\r\n};\r\n\r\n// เพิ่มข้อมูล\r\nexports.createDeviceType = async (req, res) => {\r\n  try {\r\n    const { type_name } = req.body;\r\n    if (!type_name) return res.status(400).json({ message: 'type_name is required' });\r\n\r\n    const [result] = await db.query('INSERT INTO device_types (type_name) VALUES (?)', [type_name]);\r\n    res.status(201).json({ id: result.insertId, type_name });\r\n  } catch (err) {\r\n    res.status(500).json({ error: err.message });\r\n  }\r\n};\r\n\r\n// แก้ไขข้อมูล\r\nexports.updateDeviceType = async (req, res) => {\r\n  try {\r\n    const { id } = req.params;\r\n    const { type_name } = req.body;\r\n    const [result] = await db.query('UPDATE device_types SET type_name = ? WHERE id = ?', [type_name, id]);\r\n    if (result.affectedRows === 0) return res.status(404).json({ message: 'Not found' });\r\n    res.json({ id, type_name });\r\n  } catch (err) {\r\n    res.status(500).json({ error: err.message });\r\n  }\r\n};\r\n\r\n// ลบข้อมูล\r\nexports.deleteDeviceType = async (req, res) => {\r\n  try {\r\n    const { id } = req.params;\r\n    const [result] = await db.query('DELETE FROM device_types WHERE id = ?', [id]);\r\n    if (result.affectedRows === 0) return res.status(404).json({ message: 'Not found' });\r\n    res.json({ message: 'Deleted successfully' });\r\n  } catch (err) {\r\n    res.status(500).json({ error: err.message });\r\n  }\r\n};\r\n"
        }
    ]
}